\[UNCLASSIFIED\] Inland Revenue Multi-payment Option (MPO) Schedule File Upload Specification This document is for MPO filing through myIR Date: 01/12/2020 Version: V1.0 UNCLASSIFIED Multi-payment Option Schedule Filing File Upload Specification 2021 V1.0 01 April 2020 to 31 March 2021 2 \[UNCLASSIFIED\] Contents 1 Introduction.......................................................................................................... 3 1.1 Caveats ............................................................................................................. 3 1.2 Intended audience .............................................................................................. 3 1.3 Supporting information ....................................................................................... 3 1.4 Change ............................................................................................................. 3 1.5 Disclaimer ......................................................................................................... 3 2 Electronic Filing Requirements ............................................................................. 4 2.1 Operating systems ............................................................................................. 4 2.2 Supported web browsers ..................................................................................... 4 2.3 Messages and validations in myIR ........................................................................ 4 3 Multi-payment Option Schedule ............................................................................ 5 3.1 CSV File Specifications ........................................................................................ 5 3.2 Additional File Formats ........................................................................................ 7 3.3 File Processing ................................................................................................... 7 3.4 Schedule Corrections .......................................................................................... 7 4 Appendix ............................................................................................................... 8 4.1 myIR format and layout ...................................................................................... 8 4.2 Change Log ....................................................................................................... 9 Multi-payment Option Schedule Filing File Upload Specification 2021 V1.0 01 April 2020 to 31 March 2021 3 \[UNCLASSIFIED\] 1 Introduction The Taxation (Annual Rates 2017-18 Employment and Investment Income and Remedial Matters) Bill (April 2017 Bill) requires employers to file employee income and deduction information on a payday basis to Inland Revenue (IR). IR offers file upload services that give employers, tax agents and payroll intermediaries secure and convenient methods of filing employment information online. The Multi-Payment Option (MPO) account at Inland Revenue allows tax preparers to submit a single payment that must be posted against multiple customers’ accounts. This document provides the detailed specifications for multi-payment option filing through the file upload process through MyIR. This process has been available from mid-2020. 1.1 Caveats Whilst every reasonable attempt has been made to ensure legislation has been correctly interpreted, this document is intended as a technical interface specification only. If you have an enquiry in relation to tax technical matters, please contact us either by: • sending us a secure e-mail through myIR • writing us a letter • calling our employers line on 0800 377 772 between 8:00am and 8:00pm Monday to Friday or 9:00 to 1:00pm Saturday If you need to contact Large Enterprises Services (LES), please phone 0800 443 773 between 8.00am – 4.30pm Monday to Friday only, or 04 916 7118 for overseas calls. Any updates of this specification can be found at the following link: https://www.ird.govt.nz/digital-service-providers/services-catalogue/returns-and- information/payday-filing/payday-filing-through-file-upload-services 1.2 Intended audience This document provides a mechanism for external parties to validate the record formats required by IR for payday filing. 1.3 Supporting information This document is based upon information gathered from; • Payroll Calculations & Business Rules Specification • Payday filing business use cases • IR335 Employers Guide • Inland Revenue’s online PAYE Calculator • IR341 Four-weekly and monthly PAYE deduction tables • IR340 Weekly and fortnightly PAYE deduction tables • KS4 KiwiSaver Employer Guide 1.4 Change A change log will be kept of all changes to this document (see Appendix 4.2) 1.5 Disclaimer The example test files and myIR test screen examples shown were created specifically for this document and are to illustrate what is expected and what will display to customers. Multi-payment Option Schedule Filing File Upload Specification 2021 V1.0 01 April 2020 to 31 March 2021 4 \[UNCLASSIFIED\] 2 Electronic Filing Requirements The myIR system enables employers, tax agents, payroll bureaus, payroll intermediaries and others to send electronic information across the internet to our server, which is then transferred into our tax system. The following are requirements for using myIR. 2.1 Operating systems The myIR system is operating system independent. However, a supported browser is required. 2.2 Supported web browsers At the date of publication of this document, the following web browsers are supported for use with myIR: • Apple Safari • Google Chrome • Microsoft Edge • Microsoft Internet Explorer 11 or Newer • Mozilla Firefox If an unsupported browser is detected accessing the site, a message will display advising that some website functionality may not be available, and that IR recommends switching to a supported browser. 2.3 Messages and validations in myIR Transferred files are validated by myIR and the customer informed of any errors. This validation is designed to provide instant turnaround, ensuring customers are provided with an immediate response of any errors. File validation rules include • file format • mandatory (required) data fields • data fields formats e.g. numeric, alpha numeric • data fields maximum lengths Error messages will be displayed using the current myIR format. 2.3.1 Error messages There are a number of error messages that can be received when transferring files to us. The messages will display clear details of the error or issue that has been found. Note: some of the most common issues encountered when uploading a file are the ‘line too long’ and ‘incorrect number of fields’ errors. These errors are usually caused by creating, editing and/or saving a csv file using Excel. Excel will add extra comma(s) to the end of each line when it is saved as a csv file, as it tries to make all lines the same length. This, in effect, adds another column, resulting in the errors. This is not specific to IR files; it’s a feature of Excel in general. To avoid this issue, IR does not recommend opening the file with Excel prior to uploading. If a file needs to be viewed or changed, IR recommends using a programme like Notepad or Notepad++ when opening or changing the file prior to uploading. Multi-payment Option Schedule Filing File Upload Specification 2021 V1.0 01 April 2020 to 31 March 2021 5 \[UNCLASSIFIED\] 3 Multi-payment Option Schedule The Multi-Payment Option (MPO) account at Inland Revenue allows tax preparers to submit a single payment that must be posted against multiple customers’ accounts. The schedule must be uploaded through MyIR under the tax preparer’s MPO account. This document defines the file specifications for an accepted payment schedule as well as the processing of the schedule and schedule corrections. 3.1 CSV File Specifications One option to upload a schedule is by creating a CSV file. It must have an extension of “.csv” and must use the pipe delimiter “|”. 3.1.1 Header Record The first record in the file must be the header record which contains information about who is submitting the schedule and the total amount of the schedule. RecordType|IRDNumber|TotalAmount|SubmittedDate Header record field constraints Constraints on the fields are as follows: Field Examples Constraints Record type HDR - Cannot be anything other than “HDR” - This record type cannot appear twice in the file. IRD number 123456789 or 012345678 - Must be 9 digits only (must contain a leading 0 if the IRD number is 8 digits) - The IRD number given must be registered to have an MPO account at IR. Total amount 1000.50 or 1000 or 100.00 - Must be a positive decimal value. - A full stop should be used when the amount includes cents. Otherwise a full stop is not required but would be accepted. - Amounts should not contain commas if greater than 999.99 - The summation of all item records must equal the value of this field. Submitted date 20190820 - Must be a valid date in the format of yyyymmdd - Should be the date that the schedule is submitted to IR. - Dates in the future will not be accepted. 3.1.2 Item Record Each record after the header must be an item record, which contains the schedule information of where the payment to IR should be directed. There can only be one account type listed per record. Name|IRDNumber|AccountType|Period|Amount Item record field constraints Constraints on the fields are as follows: Field Examples Constraints Record type ITM - Cannot be anything other than “ITM” Name John Smith or Smith, John - Cannot be greater than 255 characters - Cannot be blank if IRD number field is blank Multi-payment Option Schedule Filing File Upload Specification 2021 V1.0 01 April 2020 to 31 March 2021 6 \[UNCLASSIFIED\] IRD number 123456789 or 012345678 - Must be 9 digits only (must contain a leading 0 if the IRD number is 8 digits) - Cannot be blank if Name field is blank Account type INC or GST - Must be a 3-character code as listed in the Accepted account types table below Period 20190331 - A period is not required for each record and the field can be left blank. - Some accounts must have a blank period, see the Blank Period required column in the Accepted account types table below. - Must be a valid date in the format of yyyymmdd - The date must be the last day of the month - The date cannot be more than 2 years in the future and no more than 10 years in the past. Amount 1000.50 or 1000 or 100.00 - Must be a positive decimal value. - A full stop should be used when the amount includes cents. Otherwise a full stop is not required but would be accepted. - Amounts should not contain commas if greater than 999.99 If there are any errors with the above fields then the entire CSV file will be rejected, and the customer will be asked to upload the corrected file again. 3.1.3 Accepted Account Types Code Account type Blank period required? AIL Approved Issuer Levy AIP Account Information Provider CRS Common Reporting Standard FAM Working for Families DWT Dividend Withholding Tax FBT Fringe Benefit Tax GMD Gaming Machine Duty GSD Goods Sold in Sat. of Debt GST Goods and Services Tax INC Income Tax KSS KiwiSaver Member X IPS RWT on Interest NRT Non-Resident Withholding Tax PIE Portfolio Investment Entity EMP Employer Activities 1 REB Donation Tax Credit RLT Residential Land Withholding Tax RWT Resident Withholding Tax SLS Student Loan Borrower 1 – Employer activities (EMP) account covers Pay as you earn (PAY), Child Support - Employer (CSE), Student Loan - Employer (SLE), KiwiSaver Employee Deductions (KSE), KiwiSaver Employer Contributions (KSR), and Employer Superannuation Contribution Tax (SSC) Multi-payment Option Schedule Filing File Upload Specification 2021 V1.0 01 April 2020 to 31 March 2021 7 \[UNCLASSIFIED\] 3.2 Additional File Formats A CSV file is not the only option to use when uploading a multi-payment option schedule. A customer has the ability to download an excel spreadsheet of a multi-payment option schedule template from MyIR and manually enter in the records. The fields on this spreadsheet are the same as the CSV file and have similar constraints. The main differences are: • There is no header record on the excel file • The record type field does not exist on the excel file • The IRD number field can include hyphens (eg. 123-456-789). This means that the max length of the field is 11 characters. • The account type field is a drop-down box that matches the list of account types in the Accepted account types table above. The three-character code is not required in this format. • The period field should be in the format of dd/mm/yyyy. 3.3 File Processing As stated above, if any field in the file does not comply with the defined constraints then the entire file will be rejected, and the tax preparer will be asked to resubmit. If the file is loaded successfully, then additional validations will occur on each record to ensure that a matching customer, account type, and filing period can be found in the system. Tax preparers will be able to correct records in error within MyIR. If there are no issues with the multi-payment option schedule, and there exists a payment on the multi-payment option account with an amount that matches the sum of every amount field in the schedule, then the payment will be allocated to each customer that same day. If the payment amount and the schedule amount do not match, then no allocations will be made by the system until the schedule is corrected by the tax preparer. 3.4 Schedule Corrections Once a file has been uploaded to the multi-payment option account in MyIR, the tax preparer will have the ability to edit the schedule before it posts the allocations of the payment. Once a payment has been allocated, the schedule cannot be updated through MyIR. The available schedule correction options are: • Delete an entire schedule • Upload a partial schedule to append to the existing schedule • Add a record to the schedule • Delete a record from the schedule • Edit existing records in the schedule Multi-payment Option Schedule Filing File Upload Specification 2021 V1.0 01 April 2020 to 31 March 2021 8 \[UNCLASSIFIED\] 4 Appendix 4.1 myIR format and layout This section specifies the file format and layout that will be sent through the myIR system. 4.1.1 File format The file format for all myIR file transfer services must be in ASCII comma delimited format with the exception of the Employee Details excel file upload service which must be in the excel file format. 4.1.2 Location The output file must be placed in a directory that is easily accessible from the desktop. Depending on the file size, it can either be placed in a local or a LAN drive. 4.1.3 File naming suggestions There is no standard file naming required. However, for easier identification we suggest the following: • A unique, period-based name. • Inclusion of the type of return to differentiate it from other returns, which may be required to be filed electronically in the future. • A CSV extension for Employment Information • An CSV extension for Employee Details or alternatively an xls or xlsx extension for Employee Details that accepts new and departing employee details. 4.1.4 Compression File compression using the zip compression algorithm is acceptable, provided that the following rules are adhered to: Filing as an intermediary through the Tax preparer tab: • Must be a PAYE Intermediary, Payroll bureau, tax agent, Bookkeeper or Other representative who has Tax preparer tab • The content of any zip file must consist only of uncompressed files, i.e. a compressed file cannot be included within any other zip file. A ‘nested’ zip file cannot be processed and will cause the whole file to be rejected. • Only zip files of the same type. All files within that zip must represent the same file service type. E.g. Zip file cannot contain both Employee details csv file and Employment information csv file. • A zip file must be a single file only. In other words, a multi-part zip file (usually created to span removable media) will be rejected, as the decompression application will fail when trying to process a part file as a whole file. Filing through the employer’s Payroll account > File transfer service (I want to) • A zip file can contain different file types as long as the files are for that same Payroll account. E.g. A zip file can contain both an Employee details csv file and an Employment information csv file where the employer is the same as the Payroll account the file is submitted from. • All zipped files must be complete files. I.e. a zip file must not contain any files where the contents are split across two separate files. • A zip file must be a single file only. In other words, a multi-part zip file (usually created to span removable media) will be rejected, as the decompression application will fail when trying to process a part file as a whole file. Multi-payment Option Schedule Filing File Upload Specification 2021 V1.0 01 April 2020 to 31 March 2021 9 \[UNCLASSIFIED\] 4.1.5 End of record indicator Each header and detail record must end with a carriage return and line feed, which is ASCII character 13, followed by ASCII character 10. 4.1.6 Trailer record There is no trailer record required. 4.2 Change Log Number Sections changed Change description Date 1